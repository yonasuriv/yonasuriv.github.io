{
    "type": "object",
    "description": "Azure Machine Learning Compute",
    "properties": {
        "tags": {
            "type": "object",
            "default": {},
            "description": "Contains resource tags defined as key/value pairs."
        },
        "properties": {
            "type": "object",
            "description": "Compute properties",
            "properties": {
                "description": {
                    "type": "string",
                    "description": "The description of the Machine Learning compute."
                },
                "computeType": {
                    "type": "string",
                    "description": "The type of the compute",
                    "const": "AmlCompute"
                },
                "properties": {
                    "type": "object",
                    "description": "Azure Machine Learning Compute properties",
                    "properties": {
                        "vmSize": {
                            "type": "string",
                            "description": "Virtual Machine Size"
                        },
                        "vmPriority": {
                            "type": "string",
                            "description": "Virtual Machine priority",
                            "enum": [
                                "dedicated",
                                "lowpriority"
                            ],
                            "default": "dedicated"
                        },
                        "scaleSettings": {
                            "type": "object",
                            "description": "Scale settings of the compute",
                            "properties": {
                                "maxNodeCount": {
                                    "description": "Maximum number of nodes to use on the cluster. Defaults to 4",
                                    "type": "integer",
                                    "default:": 4,
                                    "minimum": 1
                                },
                                "minNodeCount": {
                                    "description": "Minimum number of nodes to use on the cluster. If not specified, will default to 0",
                                    "type": "integer",
                                    "default": 0,
                                    "minimum": 0
                                },
                                "nodeIdleTimeBeforeScaleDown": {
                                    "description": "[Optional] Node idle time in seconds or ISO 8601 time format before scaling down the cluster",
                                    "type": ["string", "integer"],
                                    "default": 120,
                                    "minimum": 0
                                }
                            },
                            "required": [
                                "maxNodeCount"
                            ]
                        },
                        "userAccountCredentials": {
                            "type": "object",
                            "description": "[Optional] User Account Credentials",
                            "properties": {
                                "adminUserName": {
                                    "type": "string",
                                    "description": "Name of the administrator user account which can be used to SSH into nodes"
                                },
                                "adminUserPassword": {
                                    "type": "string",
                                    "description": "Password of the administrator user account"
                                },
                                "adminUserSshPublicKey": {
                                    "type": "string",
                                    "description": "SSH public key of the administrator user account"
                                }
                            }
                        },
                        "vnetName": {
                            "description": "[Optional] Name of the virtual network",
                            "type": "string"
                        },
                        "subnetName": {
                            "description": "[Optional] Name of the subnet inside the vnet",
                            "type": "string"
                        },
                        "vnetResourceGroupName": {
                            "description": "[Optional] Name of the resource group where the virtual network is located",
                            "type": "string"
                        },
                        "remoteLoginPortPublicAccess": {
                            "type": "string",
                            "description": "[Optional] State of the public SSH port. Possible values are:\nDisabled - Indicates that the public ssh port is closed on all nodes of the cluster.\nEnabled - Indicates that the public ssh port is open on all nodes of the cluster.\nNotSpecified - Indicates that the public ssh port is closed on all nodes of the cluster if VNet is defined,\nelse is open all public nodes. It can be default only during cluster creation time,\nafter creation it will be either enabled or disabled",
                            "enum": [
                                "Disabled",
                                "Enabled",
                                "NotSpecified",
                                ""
                            ]
                        }

                    },
                    "required": [
                        "vmSize",
                        "vmPriority",
                        "scaleSettings"
                    ]
                }
            },
            "required": [
                "computeType",
                "properties"
            ]
        }
    },
    "required": [
        "properties"
    ]
}
